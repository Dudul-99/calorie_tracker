<!-- tracker/templates/tracker/calorie_summary.html -->
{% extends 'tracker/base.html' %}

{% block content %}
<h2>Calorie Summary for {{ date }}</h2>

<form method="get">
    <label for="date">Select Date:</label>
    <input type="date" id="date" name="date" value="{{ date|date:'Y-m-d' }}">
    <button type="submit">View Summary</button>
</form>


<h3>Daily Calorie Objective: {{ daily_objective|default:"Not set" }}</h3>
{% if progress is not None %}
    <p>Progress: {{ progress|floatformat:1 }}% of daily objective</p>
    <progress value="{{ total_nutrients.calories }}" max="{{ daily_objective }}"></progress>
{% endif %}

<h3>Total Nutrients:</h3>
<p>Calories: {{ total_nutrients.calories|floatformat:2 }} / {{ daily_objective|default:"N/A" }}</p>
<p>Carbohydrates: {{ total_nutrients.carbs|floatformat:2 }}g</p>
<p>Fats: {{ total_nutrients.fats|floatformat:2 }}g</p>
<p>Proteins: {{ total_nutrients.proteins|floatformat:2 }}g</p>







<h3>Total Nutrients:</h3>
<p>Calories: {{ total_nutrients.calories|floatformat:2 }}</p>
<p>Carbohydrates: {{ total_nutrients.carbs|floatformat:2 }}g</p>
<p>Fats: {{ total_nutrients.fats|floatformat:2 }}g</p>
<p>Proteins: {{ total_nutrients.proteins|floatformat:2 }}g</p>

<h3>Intakes:</h3>
<ul>
{% for intake in intakes %}
    <li>
        {{ intake.datetime|time:"H:i" }} - {{ intake.food.name }} 
        ({{ intake.quantity }}{% if intake.food.is_liquid %}ml{% else %}g{% endif %})
        <br>
        Calories: {{ intake.calculate_nutrients.calories|floatformat:2 }},
        Carbs: {{ intake.calculate_nutrients.carbs|floatformat:2 }}g,
        Fats: {{ intake.calculate_nutrients.fats|floatformat:2 }}g,
        Proteins: {{ intake.calculate_nutrients.proteins|floatformat:2 }}g
    </li>
{% empty %}
    <li>No intakes recorded for this day.</li>
{% endfor %}
</ul>

<a href="{% url 'tracker:add_intake' %}">Add New Intake</a>
{% endblock %}